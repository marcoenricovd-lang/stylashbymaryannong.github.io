{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Marco/OneDrive/Desktop/test/stylash/lib/services.ts"],"sourcesContent":["import { Service, ServiceCategory } from './types';\r\n\r\n// Booking fees by category (in PHP)\r\nexport const BOOKING_FEES: Record<ServiceCategory, number> = {\r\n  lashes: 200,\r\n  nails: 200,\r\n  brows: 500,\r\n  training: 1000,\r\n  hair: 500,\r\n  underarm: 200,\r\n  airlashes: 200,\r\n};\r\n\r\n// Get booking fee for a service\r\nexport function getBookingFee(category: ServiceCategory): number {\r\n  return BOOKING_FEES[category] || 200;\r\n}\r\n\r\n// Services organized by category\r\nexport const SERVICES: Service[] = [\r\n  // LASHES & BROW SERVICES\r\n  {\r\n    id: 'eyelash-extensions',\r\n    name: 'Eyelash Extensions',\r\n    category: 'lashes',\r\n    price: '450-600',\r\n    duration: null,\r\n    icon: 'ðŸ‘ï¸',\r\n    description: 'Premium lash extensions customized to enhance your natural eye shape',\r\n  },\r\n  {\r\n    id: 'lashlift-tint',\r\n    name: 'Lashlift with tint',\r\n    category: 'lashes',\r\n    price: 450,\r\n    duration: null,\r\n    icon: 'ðŸ‘ï¸',\r\n    description: 'Lift and tint your natural lashes for a beautiful, low-maintenance look',\r\n  },\r\n  {\r\n    id: 'lash-extensions-removal',\r\n    name: 'Lash Extensions Removal',\r\n    category: 'lashes',\r\n    price: '100-150',\r\n    duration: null,\r\n    icon: 'âœ‚ï¸',\r\n    description: 'Safe and gentle removal of existing lash extensions',\r\n  },\r\n  {\r\n    id: 'brow-lamination',\r\n    name: 'Brow Lamination with tint',\r\n    category: 'brows',\r\n    price: 600,\r\n    duration: null,\r\n    icon: 'âœ¨',\r\n    description: 'Achieve perfectly groomed, fuller-looking brows',\r\n  },\r\n  {\r\n    id: 'microblading',\r\n    name: 'Microblading',\r\n    category: 'brows',\r\n    price: 3000,\r\n    duration: null,\r\n    icon: 'âœï¸',\r\n    description: 'Semi-permanent eyebrow tattoo for natural-looking brows',\r\n  },\r\n  {\r\n    id: 'shading',\r\n    name: 'Shading',\r\n    category: 'brows',\r\n    price: 3500,\r\n    duration: null,\r\n    icon: 'ðŸŽ¨',\r\n    description: 'Powder brow technique for soft, shaded look',\r\n  },\r\n  {\r\n    id: 'combrows',\r\n    name: 'Combrows (All 2 Sessions + Free after care cream)',\r\n    category: 'brows',\r\n    price: 4000,\r\n    duration: null,\r\n    icon: 'ðŸ‘ï¸',\r\n    description: 'Complete brow transformation with 2 sessions and aftercare included',\r\n  },\r\n  \r\n  // NEW AIRLASHES\r\n  {\r\n    id: 'airlashes-natural',\r\n    name: 'Natural Extensions',\r\n    category: 'airlashes',\r\n    price: 600,\r\n    duration: null,\r\n    icon: 'ðŸŒ¸',\r\n    description: 'Natural-looking airlash extensions',\r\n  },\r\n  {\r\n    id: 'airlashes-volume',\r\n    name: 'Volume Extensions',\r\n    category: 'airlashes',\r\n    price: 700,\r\n    duration: null,\r\n    icon: 'ðŸ’«',\r\n    description: 'Volume airlash extensions for fuller look',\r\n  },\r\n  {\r\n    id: 'airlashes-mega',\r\n    name: 'Mega Extensions',\r\n    category: 'airlashes',\r\n    price: 800,\r\n    duration: null,\r\n    icon: 'â­',\r\n    description: 'Mega volume airlash extensions for dramatic effect',\r\n  },\r\n  {\r\n    id: 'airlashes-retouch',\r\n    name: 'Retouch',\r\n    category: 'airlashes',\r\n    price: '350-400',\r\n    duration: null,\r\n    icon: 'âœ¨',\r\n    description: 'Maintenance retouch for airlash extensions',\r\n  },\r\n  \r\n  // NAILS SERVICES\r\n  {\r\n    id: 'manegel',\r\n    name: 'Manegel',\r\n    category: 'nails',\r\n    price: 450,\r\n    duration: null,\r\n    icon: 'ðŸ’…',\r\n    description: 'Gel manicure for long-lasting, beautiful nails',\r\n  },\r\n  {\r\n    id: 'pedegel',\r\n    name: 'Pedegel',\r\n    category: 'nails',\r\n    price: 480,\r\n    duration: null,\r\n    icon: 'ðŸ¦¶',\r\n    description: 'Gel pedicure for gorgeous toenails',\r\n  },\r\n  {\r\n    id: 'softgel-extensions',\r\n    name: 'Softgel Extensions',\r\n    category: 'nails',\r\n    price: 600,\r\n    duration: null,\r\n    icon: 'ðŸ’…',\r\n    description: 'Soft gel nail extensions',\r\n  },\r\n  {\r\n    id: 'poly-acrylic-extensions',\r\n    name: 'Poly/Acrylic Extensions',\r\n    category: 'nails',\r\n    price: 800,\r\n    duration: null,\r\n    icon: 'ðŸ’Ž',\r\n    description: 'Polygel or acrylic nail extensions',\r\n  },\r\n  {\r\n    id: 'nail-extensions-removal',\r\n    name: 'Nail Extensions Removal',\r\n    category: 'nails',\r\n    price: '100-150',\r\n    duration: null,\r\n    icon: 'âœ‚ï¸',\r\n    description: 'Safe removal of nail extensions',\r\n  },\r\n  {\r\n    id: 'additional-gems',\r\n    name: 'Additional Gems & Stones',\r\n    category: 'nails',\r\n    price: '10-100',\r\n    duration: null,\r\n    icon: 'ðŸ’Ž',\r\n    description: 'Add beautiful gems and stones to your nail design',\r\n  },\r\n  \r\n  // HAIR SERVICES\r\n  {\r\n    id: 'hair-color-short',\r\n    name: 'HAIR COLOR - Short Length',\r\n    category: 'hair',\r\n    price: 600,\r\n    duration: null,\r\n    icon: 'ðŸ’‡',\r\n    description: 'Full hair color service for short hair',\r\n    notes: 'FREE TRIM!!',\r\n  },\r\n  {\r\n    id: 'hair-color-shoulder',\r\n    name: 'HAIR COLOR - Shoulder Length',\r\n    category: 'hair',\r\n    price: 800,\r\n    duration: null,\r\n    icon: 'ðŸ’‡',\r\n    description: 'Full hair color service for shoulder-length hair',\r\n    notes: 'FREE TRIM!!',\r\n  },\r\n  {\r\n    id: 'hair-color-long',\r\n    name: 'HAIR COLOR - Long Hair Length',\r\n    category: 'hair',\r\n    price: 1000,\r\n    duration: null,\r\n    icon: 'ðŸ’‡',\r\n    description: 'Full hair color service for long hair',\r\n    notes: 'FREE TRIM!!',\r\n  },\r\n  {\r\n    id: 'brazilian-botox-short',\r\n    name: 'BRAZILIAN BOTOX COLLAGEN - Short Length',\r\n    category: 'hair',\r\n    price: 800,\r\n    duration: null,\r\n    icon: 'âœ¨',\r\n    description: 'Brazilian botox collagen treatment for short hair',\r\n  },\r\n  {\r\n    id: 'brazilian-botox-shoulder',\r\n    name: 'BRAZILIAN BOTOX COLLAGEN - Shoulder Length',\r\n    category: 'hair',\r\n    price: 1000,\r\n    duration: null,\r\n    icon: 'âœ¨',\r\n    description: 'Brazilian botox collagen treatment for shoulder-length hair',\r\n  },\r\n  {\r\n    id: 'brazilian-botox-long',\r\n    name: 'BRAZILIAN BOTOX COLLAGEN - Long Hair Length',\r\n    category: 'hair',\r\n    price: 1500,\r\n    duration: null,\r\n    icon: 'âœ¨',\r\n    description: 'Brazilian botox collagen treatment for long hair',\r\n  },\r\n  \r\n  // UNDERARM SERVICES\r\n  {\r\n    id: 'ipl-per-session',\r\n    name: 'IPL per Session',\r\n    category: 'underarm',\r\n    price: 150,\r\n    duration: null,\r\n    icon: 'âœ¨',\r\n    description: 'IPL hair removal per session',\r\n  },\r\n  {\r\n    id: 'ipl-12-plus-1',\r\n    name: 'IPL 12+1 Session',\r\n    category: 'underarm',\r\n    price: 1000,\r\n    duration: null,\r\n    icon: 'âœ¨',\r\n    description: 'IPL hair removal package (12+1 sessions)',\r\n  },\r\n  {\r\n    id: 'underarm-waxing',\r\n    name: 'Underarm Waxing',\r\n    category: 'underarm',\r\n    price: 180,\r\n    duration: null,\r\n    icon: 'ðŸŒ¸',\r\n    description: 'Professional underarm waxing service',\r\n  },\r\n];\r\n\r\n// Get service by ID\r\nexport function getServiceById(id: string): Service | undefined {\r\n  return SERVICES.find(s => s.id === id);\r\n}\r\n\r\n// Get services by category\r\nexport function getServicesByCategory(category: ServiceCategory): Service[] {\r\n  return SERVICES.filter(s => s.category === category);\r\n}\r\n\r\n// Format price for display\r\nexport function formatPrice(price: number | string): string {\r\n  if (typeof price === 'string') {\r\n    return `â‚±${price}`;\r\n  }\r\n  return `â‚±${price.toLocaleString()}`;\r\n}\r\n\r\n// Get numeric price (for calculations, uses minimum if range)\r\nexport function getNumericPrice(price: number | string): number {\r\n  if (typeof price === 'number') return price;\r\n  // If it's a range like \"450-600\", return the first number\r\n  const match = price.match(/^(\\d+)/);\r\n  return match ? parseInt(match[1], 10) : 0;\r\n}\r\n\r\n// Group services by category for display\r\nexport const SERVICE_CATEGORIES: { id: ServiceCategory; name: string; description?: string }[] = [\r\n  { id: 'lashes', name: 'Lashes & Brow Services' },\r\n  { id: 'airlashes', name: 'New Airlashes' },\r\n  { id: 'nails', name: 'Nails Services' },\r\n  { id: 'hair', name: 'Hair Services' },\r\n  { id: 'underarm', name: 'Underarm Services' },\r\n];"],"names":[],"mappings":"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"}},
    {"offset": {"line": 325, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Marco/OneDrive/Desktop/test/stylash/lib/auth.ts"],"sourcesContent":["import bcrypt from 'bcryptjs';\r\nimport { AdminSession, LoginAttempt, AdminAction } from './types';\r\n\r\n// Hardcoded admin password hash (bcrypt with salt rounds 12)\r\n// Password: 7H39E8V8U4PK\r\nconst ADMIN_PASSWORD_HASH = '$2b$12$FclzLgK0BbJ1TDa6S.vaGeWli5bagjk8u3GCMy/ish1Rux8PRCDGa';\r\n\r\n// Session timeout: 30 minutes in milliseconds\r\nconst SESSION_TIMEOUT = 30 * 60 * 1000;\r\n\r\n// Lockout settings\r\nconst MAX_FAILED_ATTEMPTS = 5;\r\nconst LOCKOUT_DURATION = 30 * 60 * 1000; // 30 minutes\r\n\r\n// Storage keys\r\nconst SESSION_KEY = 'stylash_admin_session';\r\nconst LOGIN_ATTEMPTS_KEY = 'stylash_login_attempts';\r\nconst ADMIN_ACTIONS_KEY = 'stylash_admin_actions';\r\n\r\n// Get client IP address (simulated - in production, get from request headers)\r\nfunction getClientIp(): string {\r\n  if (typeof window === 'undefined') return 'unknown';\r\n  // In a real production environment, this would come from the server\r\n  // For client-side, we'll use a stored value or generate a fingerprint\r\n  let ip = localStorage.getItem('stylash_client_ip');\r\n  if (!ip) {\r\n    // Generate a simple fingerprint for this browser session\r\n    ip = `client-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\r\n    localStorage.setItem('stylash_client_ip', ip);\r\n  }\r\n  return ip;\r\n}\r\n\r\n// Generate session token\r\nfunction generateSessionToken(): string {\r\n  return `session-${Date.now()}-${Math.random().toString(36).substr(2, 16)}`;\r\n}\r\n\r\n// Check if account is locked\r\nexport function isAccountLocked(): boolean {\r\n  if (typeof window === 'undefined') return false;\r\n  \r\n  const attempts = getLoginAttempts();\r\n  const ip = getClientIp();\r\n  const recentAttempts = attempts.filter(\r\n    a => a.ipAddress === ip && !a.successful\r\n  );\r\n  \r\n  // Count failures in the last lockout window\r\n  const cutoffTime = Date.now() - LOCKOUT_DURATION;\r\n  const recentFailures = recentAttempts.filter(\r\n    a => new Date(a.timestamp).getTime() > cutoffTime\r\n  );\r\n  \r\n  if (recentFailures.length >= MAX_FAILED_ATTEMPTS) {\r\n    const lastFailure = recentFailures[recentFailures.length - 1];\r\n    const lockedUntil = new Date(lastFailure.timestamp).getTime() + LOCKOUT_DURATION;\r\n    return Date.now() < lockedUntil;\r\n  }\r\n  \r\n  return false;\r\n}\r\n\r\n// Get remaining lockout time in minutes\r\nexport function getLockoutTimeRemaining(): number {\r\n  if (typeof window === 'undefined') return 0;\r\n  \r\n  const attempts = getLoginAttempts();\r\n  const ip = getClientIp();\r\n  const recentAttempts = attempts.filter(\r\n    a => a.ipAddress === ip && !a.successful\r\n  );\r\n  \r\n  const cutoffTime = Date.now() - LOCKOUT_DURATION;\r\n  const recentFailures = recentAttempts.filter(\r\n    a => new Date(a.timestamp).getTime() > cutoffTime\r\n  );\r\n  \r\n  if (recentFailures.length >= MAX_FAILED_ATTEMPTS) {\r\n    const lastFailure = recentFailures[recentFailures.length - 1];\r\n    const lockedUntil = new Date(lastFailure.timestamp).getTime() + LOCKOUT_DURATION;\r\n    const remaining = lockedUntil - Date.now();\r\n    return Math.ceil(remaining / 60000); // Convert to minutes\r\n  }\r\n  \r\n  return 0;\r\n}\r\n\r\n// Get login attempts from storage\r\nfunction getLoginAttempts(): LoginAttempt[] {\r\n  if (typeof window === 'undefined') return [];\r\n  const stored = localStorage.getItem(LOGIN_ATTEMPTS_KEY);\r\n  return stored ? JSON.parse(stored) : [];\r\n}\r\n\r\n// Save login attempt\r\nfunction saveLoginAttempt(successful: boolean): void {\r\n  if (typeof window === 'undefined') return;\r\n  \r\n  const attempts = getLoginAttempts();\r\n  const ip = getClientIp();\r\n  \r\n  // Count recent failures for this IP\r\n  const cutoffTime = Date.now() - LOCKOUT_DURATION;\r\n  const recentFailures = attempts.filter(\r\n    a => a.ipAddress === ip && !a.successful && new Date(a.timestamp).getTime() > cutoffTime\r\n  );\r\n  \r\n  const newAttempt: LoginAttempt = {\r\n    id: `attempt-${Date.now()}`,\r\n    ipAddress: ip,\r\n    timestamp: new Date().toISOString(),\r\n    successful,\r\n    failureCount: successful ? 0 : recentFailures.length + 1,\r\n  };\r\n  \r\n  attempts.push(newAttempt);\r\n  \r\n  // Keep only last 100 attempts to prevent storage bloat\r\n  if (attempts.length > 100) {\r\n    attempts.splice(0, attempts.length - 100);\r\n  }\r\n  \r\n  localStorage.setItem(LOGIN_ATTEMPTS_KEY, JSON.stringify(attempts));\r\n}\r\n\r\n// Verify admin password\r\nexport async function verifyPassword(password: string): Promise<boolean> {\r\n  return bcrypt.compare(password, ADMIN_PASSWORD_HASH);\r\n}\r\n\r\n// Login admin\r\nexport async function loginAdmin(password: string): Promise<{ success: boolean; error?: string }> {\r\n  if (typeof window === 'undefined') {\r\n    return { success: false, error: 'Server-side rendering not supported' };\r\n  }\r\n  \r\n  // Check if account is locked\r\n  if (isAccountLocked()) {\r\n    const minutes = getLockoutTimeRemaining();\r\n    saveLoginAttempt(false);\r\n    return { success: false, error: `Account locked. Try again in ${minutes} minutes.` };\r\n  }\r\n  \r\n  // Verify password\r\n  const isValid = await verifyPassword(password);\r\n  \r\n  if (!isValid) {\r\n    saveLoginAttempt(false);\r\n    const attempts = getLoginAttempts();\r\n    const ip = getClientIp();\r\n    const cutoffTime = Date.now() - LOCKOUT_DURATION;\r\n    const recentFailures = attempts.filter(\r\n      a => a.ipAddress === ip && !a.successful && new Date(a.timestamp).getTime() > cutoffTime\r\n    );\r\n    const remainingAttempts = MAX_FAILED_ATTEMPTS - recentFailures.length;\r\n    \r\n    if (remainingAttempts <= 0) {\r\n      return { success: false, error: 'Account locked for 30 minutes due to too many failed attempts.' };\r\n    }\r\n    \r\n    return { success: false, error: `Invalid password. ${remainingAttempts} attempts remaining.` };\r\n  }\r\n  \r\n  // Create session\r\n  const session: AdminSession = {\r\n    isAuthenticated: true,\r\n    loggedInAt: new Date().toISOString(),\r\n    lastActivity: new Date().toISOString(),\r\n    ipAddress: getClientIp(),\r\n    sessionToken: generateSessionToken(),\r\n  };\r\n  \r\n  localStorage.setItem(SESSION_KEY, JSON.stringify(session));\r\n  saveLoginAttempt(true);\r\n  \r\n  // Log the login action\r\n  logAdminAction('LOGIN', { ipAddress: session.ipAddress });\r\n  \r\n  return { success: true };\r\n}\r\n\r\n// Get current session\r\nexport function getSession(): AdminSession | null {\r\n  if (typeof window === 'undefined') return null;\r\n  \r\n  const stored = localStorage.getItem(SESSION_KEY);\r\n  if (!stored) return null;\r\n  \r\n  const session: AdminSession = JSON.parse(stored);\r\n  \r\n  // Check if session has expired\r\n  const lastActivity = new Date(session.lastActivity).getTime();\r\n  if (Date.now() - lastActivity > SESSION_TIMEOUT) {\r\n    logoutAdmin();\r\n    return null;\r\n  }\r\n  \r\n  return session;\r\n}\r\n\r\n// Check if admin is authenticated\r\nexport function isAuthenticated(): boolean {\r\n  const session = getSession();\r\n  return session?.isAuthenticated === true;\r\n}\r\n\r\n// Update last activity\r\nexport function updateActivity(): void {\r\n  if (typeof window === 'undefined') return;\r\n  \r\n  const session = getSession();\r\n  if (session) {\r\n    session.lastActivity = new Date().toISOString();\r\n    localStorage.setItem(SESSION_KEY, JSON.stringify(session));\r\n  }\r\n}\r\n\r\n// Logout admin\r\nexport function logoutAdmin(): void {\r\n  if (typeof window === 'undefined') return;\r\n  \r\n  // Get session directly from storage to avoid infinite loop with getSession()\r\n  const stored = localStorage.getItem(SESSION_KEY);\r\n  if (stored) {\r\n    try {\r\n      const session: AdminSession = JSON.parse(stored);\r\n      logAdminAction('LOGOUT', { sessionToken: session.sessionToken });\r\n    } catch {\r\n      // Ignore parsing errors\r\n    }\r\n  }\r\n  \r\n  localStorage.removeItem(SESSION_KEY);\r\n}\r\n\r\n// Log admin action\r\nexport function logAdminAction(action: string, details: Record<string, unknown>): void {\r\n  if (typeof window === 'undefined') return;\r\n  \r\n  const actions = getAdminActions();\r\n  const session = getSession();\r\n  \r\n  const newAction: AdminAction = {\r\n    id: `action-${Date.now()}`,\r\n    action,\r\n    details: {\r\n      ...details,\r\n      userAgent: typeof window !== 'undefined' ? window.navigator.userAgent : 'unknown',\r\n    },\r\n    timestamp: new Date().toISOString(),\r\n    ipAddress: session?.ipAddress || getClientIp(),\r\n    sessionToken: session?.sessionToken || 'anonymous',\r\n  };\r\n  \r\n  actions.push(newAction);\r\n  \r\n  // Keep only last 500 actions to prevent storage bloat\r\n  if (actions.length > 500) {\r\n    actions.splice(0, actions.length - 500);\r\n  }\r\n  \r\n  localStorage.setItem(ADMIN_ACTIONS_KEY, JSON.stringify(actions));\r\n}\r\n\r\n// Get admin actions\r\nexport function getAdminActions(): AdminAction[] {\r\n  if (typeof window === 'undefined') return [];\r\n  const stored = localStorage.getItem(ADMIN_ACTIONS_KEY);\r\n  return stored ? JSON.parse(stored) : [];\r\n}\r\n\r\n// Get login attempts for display\r\nexport function getLoginAttemptsForDisplay(): LoginAttempt[] {\r\n  return getLoginAttempts().slice(-20).reverse(); // Last 20, most recent first\r\n}\r\n\r\n// Audit log storage key\r\nconst AUDIT_LOG_KEY = 'stylash_audit_log';\r\n\r\n// Get audit log entries\r\nexport function getAuditLog(): import('./types').AuditLogEntry[] {\r\n  if (typeof window === 'undefined') return [];\r\n  const stored = localStorage.getItem(AUDIT_LOG_KEY);\r\n  return stored ? JSON.parse(stored) : [];\r\n}\r\n\r\n// Add audit log entry\r\nexport function addAuditLogEntry(entry: Omit<import('./types').AuditLogEntry, 'id'>): void {\r\n  if (typeof window === 'undefined') return;\r\n  \r\n  const logs = getAuditLog();\r\n  const newEntry: import('./types').AuditLogEntry = {\r\n    ...entry,\r\n    id: `audit-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,\r\n  };\r\n  \r\n  logs.push(newEntry);\r\n  \r\n  // Keep only last 1000 entries\r\n  if (logs.length > 1000) {\r\n    logs.splice(0, logs.length - 1000);\r\n  }\r\n  \r\n  localStorage.setItem(AUDIT_LOG_KEY, JSON.stringify(logs));\r\n}\r\n\r\n// Get login activity for security panel\r\nexport function getLoginActivity(): import('./types').LoginAttempt[] {\r\n  return getLoginAttempts();\r\n}\r\n\r\n// Get active sessions (simplified - in real app would track multiple devices)\r\nexport function getActiveSessions(): { token: string; ip: string; startedAt: string }[] {\r\n  if (typeof window === 'undefined') return [];\r\n  \r\n  const stored = localStorage.getItem(SESSION_KEY);\r\n  if (!stored) return [];\r\n  \r\n  try {\r\n    const session: import('./types').AdminSession = JSON.parse(stored);\r\n    return [{\r\n      token: session.sessionToken,\r\n      ip: session.ipAddress,\r\n      startedAt: session.loggedInAt,\r\n    }];\r\n  } catch {\r\n    return [];\r\n  }\r\n}\r\n\r\n// Force logout a session\r\nexport function forceLogoutSession(token: string): void {\r\n  if (typeof window === 'undefined') return;\r\n  \r\n  const stored = localStorage.getItem(SESSION_KEY);\r\n  if (stored) {\r\n    try {\r\n      const session: import('./types').AdminSession = JSON.parse(stored);\r\n      if (session.sessionToken === token) {\r\n        logoutAdmin();\r\n      }\r\n    } catch {\r\n      // Ignore parsing errors\r\n    }\r\n  }\r\n}\r\n\r\n// Clear all auth data (for testing)\r\nexport function clearAllAuthData(): void {\r\n  if (typeof window === 'undefined') return;\r\n  localStorage.removeItem(SESSION_KEY);\r\n  localStorage.removeItem(LOGIN_ATTEMPTS_KEY);\r\n  localStorage.removeItem(ADMIN_ACTIONS_KEY);\r\n  localStorage.removeItem(AUDIT_LOG_KEY);\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 658, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Marco/OneDrive/Desktop/test/stylash/lib/bookings.ts"],"sourcesContent":["import { Booking, BookingStatus, PaymentStatus, OverbookReason, OverbookResolution, AvailabilitySettings, OverbookingSettings } from './types';\r\nimport { getServiceById, getNumericPrice, getBookingFee } from './services';\r\nimport { logAdminAction } from './auth';\r\n\r\nconst BOOKINGS_KEY = 'stylash_bookings';\r\nconst AVAILABILITY_KEY = 'stylash_availability';\r\nconst OVERBOOKING_KEY = 'stylash_overbooking';\r\n\r\n// Default time slots\r\nexport const DEFAULT_TIME_SLOTS = [\r\n  '09:00', '09:30', '10:00', '10:30', '11:00', '11:30',\r\n  '12:00', '12:30', '13:00', '13:30', '14:00', '14:30',\r\n  '15:00', '15:30', '16:00', '16:30', '17:00', '17:30', '18:00'\r\n];\r\n\r\n// Default availability settings\r\nexport const DEFAULT_AVAILABILITY: AvailabilitySettings = {\r\n  workingHours: [\r\n    { day: 0, isOpen: false, openTime: '09:00', closeTime: '17:00' }, // Sunday - closed\r\n    { day: 1, isOpen: true, openTime: '09:00', closeTime: '18:00' }, // Monday\r\n    { day: 2, isOpen: true, openTime: '09:00', closeTime: '18:00' }, // Tuesday\r\n    { day: 3, isOpen: true, openTime: '09:00', closeTime: '18:00' }, // Wednesday\r\n    { day: 4, isOpen: true, openTime: '09:00', closeTime: '18:00' }, // Thursday\r\n    { day: 5, isOpen: true, openTime: '09:00', closeTime: '18:00' }, // Friday\r\n    { day: 6, isOpen: true, openTime: '09:00', closeTime: '18:00' }, // Saturday\r\n  ],\r\n  blockedDates: [],\r\n  dateSpecificSlots: [], // Custom time slots for specific dates\r\n  leadTimeDays: 1, // No same-day bookings\r\n  maxBookingsPerSlot: 1,\r\n  bufferTimeMinutes: 0,\r\n  maxAdvanceBookingDays: 0, // 0 = unlimited (default)\r\n};\r\n\r\n// Default overbooking settings\r\nexport const DEFAULT_OVERBOOKING: OverbookingSettings = {\r\n  enabled: true,\r\n  maxOverbookedPerDay: 2,\r\n  maxOverbookedPerSlot: 1,\r\n  requireReason: true,\r\n};\r\n\r\n// Get all bookings\r\nexport function getAllBookings(): Booking[] {\r\n  if (typeof window === 'undefined') return [];\r\n  const stored = localStorage.getItem(BOOKINGS_KEY);\r\n  return stored ? JSON.parse(stored) : [];\r\n}\r\n\r\n// Get bookings by date\r\nexport function getBookingsByDate(date: string): Booking[] {\r\n  return getAllBookings().filter(b => b.date === date);\r\n}\r\n\r\n// Get bookings by status\r\nexport function getBookingsByStatus(status: BookingStatus): Booking[] {\r\n  return getAllBookings().filter(b => b.status === status);\r\n}\r\n\r\n// Get booking by ID\r\nexport function getBookingById(id: string): Booking | undefined {\r\n  return getAllBookings().find(b => b.id === id);\r\n}\r\n\r\n// Get booked time slots for a date\r\nexport function getBookedSlots(date: string): string[] {\r\n  return getBookingsByDate(date)\r\n    .filter(b => ['pending_payment', 'awaiting_verification', 'confirmed'].includes(b.status))\r\n    .map(b => b.timeSlot);\r\n}\r\n\r\n// Get available time slots for a date\r\nexport function getAvailableTimeSlots(date: string): string[] {\r\n  const availability = getAvailabilitySettings();\r\n  \r\n  // Check if date has specific slots defined\r\n  const dateSpecific = availability.dateSpecificSlots.find(s => s.date === date);\r\n  if (dateSpecific) {\r\n    if (dateSpecific.isFullyBooked) return [];\r\n    return dateSpecific.timeSlots;\r\n  }\r\n  \r\n  // Check if date is blocked\r\n  if (availability.blockedDates.includes(date)) {\r\n    return [];\r\n  }\r\n  \r\n  // Check working hours\r\n  const dateObj = new Date(date);\r\n  const dayOfWeek = dateObj.getDay();\r\n  const workingDay = availability.workingHours.find(w => w.day === dayOfWeek);\r\n  \r\n  if (!workingDay || !workingDay.isOpen) {\r\n    return [];\r\n  }\r\n  \r\n  // Generate slots from working hours\r\n  const slots: string[] = [];\r\n  const startHour = parseInt(workingDay.openTime.split(':')[0]);\r\n  const startMin = parseInt(workingDay.openTime.split(':')[1]);\r\n  const endHour = parseInt(workingDay.closeTime.split(':')[0]);\r\n  const endMin = parseInt(workingDay.closeTime.split(':')[1]);\r\n  \r\n  let currentHour = startHour;\r\n  let currentMin = startMin;\r\n  \r\n  while (currentHour < endHour || (currentHour === endHour && currentMin < endMin)) {\r\n    const timeStr = `${currentHour.toString().padStart(2, '0')}:${currentMin.toString().padStart(2, '0')}`;\r\n    slots.push(timeStr);\r\n    \r\n    currentMin += 30;\r\n    if (currentMin >= 60) {\r\n      currentMin = 0;\r\n      currentHour++;\r\n    }\r\n  }\r\n  \r\n  return slots;\r\n}\r\n\r\n// Check if a time slot is available\r\nexport function isSlotAvailable(date: string, timeSlot: string): boolean {\r\n  const availability = getAvailabilitySettings();\r\n  const bookings = getBookingsByDate(date);\r\n  \r\n  // Check lead time\r\n  const today = new Date();\r\n  today.setHours(0, 0, 0, 0);\r\n  const bookingDate = new Date(date);\r\n  const daysDiff = Math.ceil((bookingDate.getTime() - today.getTime()) / (1000 * 60 * 60 * 24));\r\n  \r\n  if (daysDiff < availability.leadTimeDays) {\r\n    return false;\r\n  }\r\n  \r\n  // Check maximum advance booking limit\r\n  if (availability.maxAdvanceBookingDays > 0 && daysDiff > availability.maxAdvanceBookingDays) {\r\n    return false;\r\n  }\r\n  \r\n  // Get available slots for this date\r\n  const availableSlots = getAvailableTimeSlots(date);\r\n  \r\n  // Check if this time slot is in the available list\r\n  if (!availableSlots.includes(timeSlot)) {\r\n    return false;\r\n  }\r\n  \r\n  // Check if there's already a booking for this slot (ONLY 1 booking per slot allowed)\r\n  const existingBooking = bookings.find(\r\n    b => b.timeSlot === timeSlot && \r\n    ['pending_payment', 'awaiting_verification', 'confirmed'].includes(b.status)\r\n  );\r\n  \r\n  // Return false if ANY booking exists for this slot\r\n  return !existingBooking;\r\n}\r\n\r\n// Set custom time slots for a specific date\r\nexport function setDateSpecificSlots(date: string, timeSlots: string[], note?: string): void {\r\n  const availability = getAvailabilitySettings();\r\n  \r\n  const existingIndex = availability.dateSpecificSlots.findIndex(s => s.date === date);\r\n  const newSlot: import('./types').DateSpecificSlot = {\r\n    date,\r\n    timeSlots,\r\n    note,\r\n    isFullyBooked: false,\r\n  };\r\n  \r\n  if (existingIndex >= 0) {\r\n    availability.dateSpecificSlots[existingIndex] = newSlot;\r\n  } else {\r\n    availability.dateSpecificSlots.push(newSlot);\r\n  }\r\n  \r\n  updateAvailabilitySettings(availability);\r\n  logAdminAction('SET_DATE_SLOTS', { date, timeSlots, note });\r\n}\r\n\r\n// Remove custom time slots for a date\r\nexport function removeDateSpecificSlots(date: string): void {\r\n  const availability = getAvailabilitySettings();\r\n  availability.dateSpecificSlots = availability.dateSpecificSlots.filter(s => s.date !== date);\r\n  updateAvailabilitySettings(availability);\r\n  logAdminAction('REMOVE_DATE_SLOTS', { date });\r\n}\r\n\r\n// Mark a date as fully booked (but keep it visible)\r\nexport function markDateFullyBooked(date: string, note?: string): void {\r\n  const availability = getAvailabilitySettings();\r\n  \r\n  const existingIndex = availability.dateSpecificSlots.findIndex(s => s.date === date);\r\n  const newSlot: import('./types').DateSpecificSlot = {\r\n    date,\r\n    timeSlots: [],\r\n    isFullyBooked: true,\r\n    note: note || 'Fully booked',\r\n  };\r\n  \r\n  if (existingIndex >= 0) {\r\n    availability.dateSpecificSlots[existingIndex] = newSlot;\r\n  } else {\r\n    availability.dateSpecificSlots.push(newSlot);\r\n  }\r\n  \r\n  updateAvailabilitySettings(availability);\r\n  logAdminAction('MARK_FULLY_BOOKED', { date, note });\r\n}\r\n\r\n// Create a new booking\r\nexport function createBooking(data: {\r\n  date: string;\r\n  timeSlot: string;\r\n  serviceId: string;\r\n  customerName: string;\r\n  customerEmail: string;\r\n  customerPhone: string;\r\n  notes?: string;\r\n  paymentMethod: 'gcash' | 'maya' | 'bank_transfer';\r\n}): Booking | null {\r\n  if (typeof window === 'undefined') return null;\r\n  \r\n  const service = getServiceById(data.serviceId);\r\n  if (!service) return null;\r\n  \r\n  const servicePrice = getNumericPrice(service.price);\r\n  const bookingFee = getBookingFee(service.category);\r\n  \r\n  const booking: Booking = {\r\n    id: `STL-${Date.now().toString(36).toUpperCase()}`,\r\n    date: data.date,\r\n    timeSlot: data.timeSlot,\r\n    serviceId: data.serviceId,\r\n    serviceName: service.name,\r\n    servicePrice,\r\n    bookingFee,\r\n    customerName: data.customerName,\r\n    customerEmail: data.customerEmail,\r\n    customerPhone: data.customerPhone,\r\n    notes: data.notes,\r\n    status: 'pending_payment',\r\n    paymentStatus: 'pending',\r\n    paymentMethod: data.paymentMethod,\r\n    createdAt: new Date().toISOString(),\r\n    updatedAt: new Date().toISOString(),\r\n  };\r\n  \r\n  const bookings = getAllBookings();\r\n  bookings.push(booking);\r\n  localStorage.setItem(BOOKINGS_KEY, JSON.stringify(bookings));\r\n  \r\n  return booking;\r\n}\r\n\r\n// Update booking status\r\nexport function updateBookingStatus(\r\n  id: string, \r\n  status: BookingStatus, \r\n  paymentStatus?: PaymentStatus\r\n): Booking | null {\r\n  const bookings = getAllBookings();\r\n  const index = bookings.findIndex(b => b.id === id);\r\n  \r\n  if (index === -1) return null;\r\n  \r\n  bookings[index].status = status;\r\n  if (paymentStatus) {\r\n    bookings[index].paymentStatus = paymentStatus;\r\n  }\r\n  bookings[index].updatedAt = new Date().toISOString();\r\n  \r\n  localStorage.setItem(BOOKINGS_KEY, JSON.stringify(bookings));\r\n  \r\n  logAdminAction('UPDATE_BOOKING_STATUS', { \r\n    bookingId: id, \r\n    newStatus: status,\r\n    newPaymentStatus: paymentStatus \r\n  });\r\n  \r\n  return bookings[index];\r\n}\r\n\r\n// Mark payment as received\r\nexport function markPaymentReceived(id: string): Booking | null {\r\n  const bookings = getAllBookings();\r\n  const index = bookings.findIndex(b => b.id === id);\r\n  \r\n  if (index === -1) return null;\r\n  \r\n  bookings[index].status = 'confirmed';\r\n  bookings[index].paymentStatus = 'paid';\r\n  bookings[index].verifiedAt = new Date().toISOString();\r\n  bookings[index].updatedAt = new Date().toISOString();\r\n  \r\n  localStorage.setItem(BOOKINGS_KEY, JSON.stringify(bookings));\r\n  \r\n  logAdminAction('MARK_PAYMENT_RECEIVED', { bookingId: id });\r\n  \r\n  return bookings[index];\r\n}\r\n\r\n// Mark as overbooked\r\nexport function markAsOverbooked(\r\n  id: string, \r\n  reason: OverbookReason, \r\n  notes?: string\r\n): Booking | null {\r\n  const bookings = getAllBookings();\r\n  const index = bookings.findIndex(b => b.id === id);\r\n  \r\n  if (index === -1) return null;\r\n  \r\n  bookings[index].status = 'overbooked';\r\n  bookings[index].isOverbooked = true;\r\n  bookings[index].overbookReason = reason;\r\n  bookings[index].overbookNotes = notes;\r\n  bookings[index].overbookedAt = new Date().toISOString();\r\n  bookings[index].overbookResolution = 'pending';\r\n  bookings[index].updatedAt = new Date().toISOString();\r\n  \r\n  localStorage.setItem(BOOKINGS_KEY, JSON.stringify(bookings));\r\n  \r\n  logAdminAction('MARK_OVERBOOKED', { \r\n    bookingId: id, \r\n    reason,\r\n    notes \r\n  });\r\n  \r\n  return bookings[index];\r\n}\r\n\r\n// Resolve overbooking\r\nexport function resolveOverbooking(\r\n  id: string,\r\n  resolution: OverbookResolution,\r\n  compensationAmount?: number\r\n): Booking | null {\r\n  const bookings = getAllBookings();\r\n  const index = bookings.findIndex(b => b.id === id);\r\n  \r\n  if (index === -1) return null;\r\n  \r\n  bookings[index].overbookResolution = resolution;\r\n  bookings[index].overbookResolvedAt = new Date().toISOString();\r\n  bookings[index].compensationAmount = compensationAmount;\r\n  \r\n  if (resolution === 'refunded') {\r\n    bookings[index].status = 'cancelled';\r\n    bookings[index].paymentStatus = 'refunded';\r\n  } else if (resolution === 'rescheduled') {\r\n    bookings[index].status = 'confirmed';\r\n  } else if (resolution === 'completed_with_compensation') {\r\n    bookings[index].status = 'completed';\r\n  }\r\n  \r\n  bookings[index].updatedAt = new Date().toISOString();\r\n  \r\n  localStorage.setItem(BOOKINGS_KEY, JSON.stringify(bookings));\r\n  \r\n  logAdminAction('RESOLVE_OVERBOOKING', { \r\n    bookingId: id, \r\n    resolution,\r\n    compensationAmount \r\n  });\r\n  \r\n  return bookings[index];\r\n}\r\n\r\n// Cancel booking\r\nexport function cancelBooking(id: string, reason?: string): Booking | null {\r\n  const bookings = getAllBookings();\r\n  const index = bookings.findIndex(b => b.id === id);\r\n  \r\n  if (index === -1) return null;\r\n  \r\n  bookings[index].status = 'cancelled';\r\n  bookings[index].paymentStatus = 'refunded';\r\n  bookings[index].cancellationReason = reason;\r\n  bookings[index].cancelledAt = new Date().toISOString();\r\n  bookings[index].updatedAt = new Date().toISOString();\r\n  \r\n  localStorage.setItem(BOOKINGS_KEY, JSON.stringify(bookings));\r\n  \r\n  logAdminAction('CANCEL_BOOKING', { bookingId: id, reason });\r\n  \r\n  return bookings[index];\r\n}\r\n\r\n// Reschedule booking\r\nexport function rescheduleBooking(\r\n  id: string, \r\n  newDate: string, \r\n  newTimeSlot: string\r\n): Booking | null {\r\n  const bookings = getAllBookings();\r\n  const index = bookings.findIndex(b => b.id === id);\r\n  \r\n  if (index === -1) return null;\r\n  \r\n  const oldDate = bookings[index].date;\r\n  const oldTime = bookings[index].timeSlot;\r\n  \r\n  bookings[index].date = newDate;\r\n  bookings[index].timeSlot = newTimeSlot;\r\n  bookings[index].updatedAt = new Date().toISOString();\r\n  \r\n  localStorage.setItem(BOOKINGS_KEY, JSON.stringify(bookings));\r\n  \r\n  logAdminAction('RESCHEDULE_BOOKING', { \r\n    bookingId: id, \r\n    oldDate,\r\n    oldTime,\r\n    newDate,\r\n    newTimeSlot \r\n  });\r\n  \r\n  return bookings[index];\r\n}\r\n\r\n// Get availability settings\r\nexport function getAvailabilitySettings(): AvailabilitySettings {\r\n  if (typeof window === 'undefined') return DEFAULT_AVAILABILITY;\r\n  const stored = localStorage.getItem(AVAILABILITY_KEY);\r\n  if (!stored) return DEFAULT_AVAILABILITY;\r\n  \r\n  const parsed = JSON.parse(stored);\r\n  \r\n  // Merge with defaults to ensure new fields exist\r\n  return {\r\n    ...DEFAULT_AVAILABILITY,\r\n    ...parsed,\r\n    // Ensure dateSpecificSlots exists (for backward compatibility)\r\n    dateSpecificSlots: parsed.dateSpecificSlots || [],\r\n  };\r\n}\r\n\r\n// Update availability settings\r\nexport function updateAvailabilitySettings(settings: AvailabilitySettings): void {\r\n  if (typeof window === 'undefined') return;\r\n  localStorage.setItem(AVAILABILITY_KEY, JSON.stringify(settings));\r\n  logAdminAction('UPDATE_AVAILABILITY', { ...settings });\r\n}\r\n\r\n// Get overbooking settings\r\nexport function getOverbookingSettings(): OverbookingSettings {\r\n  if (typeof window === 'undefined') return DEFAULT_OVERBOOKING;\r\n  const stored = localStorage.getItem(OVERBOOKING_KEY);\r\n  return stored ? JSON.parse(stored) : DEFAULT_OVERBOOKING;\r\n}\r\n\r\n// Update overbooking settings\r\nexport function updateOverbookingSettings(settings: OverbookingSettings): void {\r\n  if (typeof window === 'undefined') return;\r\n  localStorage.setItem(OVERBOOKING_KEY, JSON.stringify(settings));\r\n  logAdminAction('UPDATE_OVERBOOKING_SETTINGS', { ...settings });\r\n}\r\n\r\n// Get booking statistics\r\nexport function getBookingStats() {\r\n  const bookings = getAllBookings();\r\n  const today = new Date().toISOString().split('T')[0];\r\n  \r\n  return {\r\n    total: bookings.length,\r\n    pendingPayment: bookings.filter(b => b.status === 'pending_payment').length,\r\n    awaitingVerification: bookings.filter(b => b.status === 'awaiting_verification').length,\r\n    confirmed: bookings.filter(b => b.status === 'confirmed').length,\r\n    completed: bookings.filter(b => b.status === 'completed').length,\r\n    cancelled: bookings.filter(b => b.status === 'cancelled').length,\r\n    overbooked: bookings.filter(b => b.status === 'overbooked').length,\r\n    today: bookings.filter(b => b.date === today).length,\r\n    revenue: bookings\r\n      .filter(b => b.paymentStatus === 'paid')\r\n      .reduce((sum, b) => sum + b.bookingFee, 0),\r\n  };\r\n}\r\n\r\n// Search bookings\r\nexport function searchBookings(query: string): Booking[] {\r\n  const lowerQuery = query.toLowerCase();\r\n  return getAllBookings().filter(b => \r\n    b.id.toLowerCase().includes(lowerQuery) ||\r\n    b.customerName.toLowerCase().includes(lowerQuery) ||\r\n    b.customerEmail.toLowerCase().includes(lowerQuery) ||\r\n    b.customerPhone.includes(query) ||\r\n    b.serviceName.toLowerCase().includes(lowerQuery)\r\n  );\r\n}\r\n\r\n// Clear all bookings (for testing)\r\nexport function clearAllBookings(): void {\r\n  if (typeof window === 'undefined') return;\r\n  localStorage.removeItem(BOOKINGS_KEY);\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1145, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Marco/OneDrive/Desktop/test/stylash/app/book/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect, Suspense } from \"react\";\r\nimport { useSearchParams } from \"next/navigation\";\r\nimport Link from \"next/link\";\r\nimport { ChevronLeft, Calendar, Clock, User, Phone, Mail, CheckCircle, CreditCard, Loader2, QrCode } from \"lucide-react\";\r\nimport { format, isSameDay, startOfDay, isBefore, isToday } from \"date-fns\";\r\nimport { SERVICES, getServiceById, getBookingFee, formatPrice } from \"@/lib/services\";\r\nimport { createBooking, getAvailableTimeSlots, isSlotAvailable, getAvailabilitySettings } from \"@/lib/bookings\";\r\n\r\nfunction BookingForm() {\r\n  const searchParams = useSearchParams();\r\n  const preSelectedService = searchParams.get(\"service\");\r\n  const [step, setStep] = useState(1);\r\n  const [selectedDate, setSelectedDate] = useState<Date | null>(null);\r\n  const [selectedTime, setSelectedTime] = useState<string | null>(null);\r\n  const [selectedServiceId, setSelectedServiceId] = useState(preSelectedService || \"\");\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [currentMonth, setCurrentMonth] = useState(new Date());\r\n  const [formData, setFormData] = useState({ name: \"\", email: \"\", phone: \"\", notes: \"\" });\r\n  const [availableSlots, setAvailableSlots] = useState<string[]>([]);\r\n\r\n  const selectedService = getServiceById(selectedServiceId);\r\n  const availability = getAvailabilitySettings();\r\n  const maxAdvanceDays = availability.maxAdvanceBookingDays;\r\n\r\n  // Update available slots when date changes\r\n  useEffect(() => {\r\n    if (selectedDate) {\r\n      const dateStr = format(selectedDate, \"yyyy-MM-dd\");\r\n      setAvailableSlots(getAvailableTimeSlots(dateStr));\r\n      // Clear selected time if it's no longer available\r\n      if (selectedTime && !getAvailableTimeSlots(dateStr).includes(selectedTime)) {\r\n        setSelectedTime(null);\r\n      }\r\n    }\r\n  }, [selectedDate]);\r\n\r\n  // Check if a date is selectable (within allowed range)\r\n  const isDateSelectable = (date: Date): boolean => {\r\n    // Check if date is in the past\r\n    if (isBefore(date, startOfDay(new Date()))) return false;\r\n    \r\n    // Check max advance booking limit\r\n    if (maxAdvanceDays > 0) {\r\n      const today = new Date();\r\n      today.setHours(0, 0, 0, 0);\r\n      const daysDiff = Math.ceil((date.getTime() - today.getTime()) / (1000 * 60 * 60 * 24));\r\n      if (daysDiff > maxAdvanceDays) return false;\r\n    }\r\n    \r\n    return true;\r\n  };\r\n\r\n  const generateCalendarDays = () => {\r\n    const year = currentMonth.getFullYear(), month = currentMonth.getMonth();\r\n    const firstDay = new Date(year, month, 1), lastDay = new Date(year, month + 1, 0);\r\n    const days: (Date | null)[] = [];\r\n    for (let i = 0; i < firstDay.getDay(); i++) days.push(null);\r\n    for (let i = 1; i <= lastDay.getDate(); i++) days.push(new Date(year, month, i));\r\n    return days;\r\n  };\r\n\r\n  const handleDetailsSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setStep(4);\r\n  };\r\n\r\n  const handlePaymentComplete = () => {\r\n    setIsLoading(true);\r\n    if (!selectedDate || !selectedTime || !selectedService) { setIsLoading(false); return; }\r\n    createBooking({ \r\n      date: format(selectedDate, \"yyyy-MM-dd\"), \r\n      timeSlot: selectedTime, \r\n      serviceId: selectedServiceId, \r\n      customerName: formData.name, \r\n      customerEmail: formData.email, \r\n      customerPhone: formData.phone, \r\n      notes: formData.notes, \r\n      paymentMethod: \"gcash\" \r\n    });\r\n    setStep(5);\r\n    setIsLoading(false);\r\n  };\r\n\r\n  const bookingFee = selectedService ? getBookingFee(selectedService.category) : 0;\r\n\r\n  if (step === 5) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gradient-to-b from-pink-50 to-white py-20 px-4\">\r\n        <div className=\"max-w-2xl mx-auto text-center\">\r\n          <div className=\"bg-white rounded-3xl shadow-xl p-8\">\r\n            <div className=\"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6\">\r\n              <CheckCircle className=\"w-10 h-10 text-green-600\" />\r\n            </div>\r\n            <h1 className=\"text-3xl font-bold font-serif mb-4\">Booking Confirmed!</h1>\r\n            <p className=\"text-gray-600 mb-6\">Your appointment has been scheduled.</p>\r\n            <Link href=\"/\" className=\"px-8 py-3 bg-pink-600 text-white rounded-full font-medium hover:bg-pink-700\">Back to Home</Link>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-b from-pink-50 to-white\">\r\n      <header className=\"bg-white shadow-sm sticky top-0 z-50\">\r\n        <div className=\"max-w-7xl mx-auto px-4 py-4 flex items-center justify-between\">\r\n          <Link href=\"/\" className=\"flex items-center gap-2 text-gray-600 hover:text-pink-600\"><ChevronLeft className=\"w-5 h-5\" /><span>Back</span></Link>\r\n          <span className=\"text-2xl font-bold font-serif text-pink-600\">Stylash</span>\r\n          <div className=\"w-16\" />\r\n        </div>\r\n      </header>\r\n      <div className=\"max-w-7xl mx-auto px-4 py-8\">\r\n        {step === 1 && (\r\n          <div className=\"max-w-4xl mx-auto\">\r\n            <h1 className=\"text-3xl font-bold text-center mb-8\">Select a Service</h1>\r\n            <div className=\"grid md:grid-cols-2 gap-4\">\r\n              {SERVICES.map((service) => (\r\n                <button key={service.id} onClick={() => { setSelectedServiceId(service.id); setStep(2); }} \r\n                  className={`p-6 rounded-2xl border-2 text-left transition-all ${selectedServiceId === service.id ? \"border-pink-600 bg-pink-50\" : \"border-gray-200 hover:border-pink-300\"}`}>\r\n                  <div className=\"flex justify-between items-start mb-2\">\r\n                    <span className=\"text-3xl\">{service.icon}</span>\r\n                    <span className=\"text-pink-600 font-bold\">{formatPrice(service.price)}</span>\r\n                  </div>\r\n                  <h3 className=\"font-bold text-lg\">{service.name}</h3>\r\n                  {service.description && <p className=\"text-gray-500 text-sm mt-1\">{service.description}</p>}\r\n                </button>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {step === 2 && (\r\n          <div className=\"max-w-5xl mx-auto\">\r\n            <h1 className=\"text-3xl font-bold text-center mb-8\">Select Date & Time</h1>\r\n            <div className=\"grid lg:grid-cols-2 gap-8\">\r\n              <div className=\"bg-white rounded-2xl shadow-lg p-6\">\r\n                <div className=\"flex items-center justify-between mb-4\">\r\n                  <button onClick={() => setCurrentMonth(new Date(currentMonth.getFullYear(), currentMonth.getMonth() - 1))} className=\"p-2 hover:bg-gray-100 rounded\">&lt;</button>\r\n                  <h3 className=\"font-bold\">{format(currentMonth, \"MMMM yyyy\")}</h3>\r\n                  <button onClick={() => setCurrentMonth(new Date(currentMonth.getFullYear(), currentMonth.getMonth() + 1))} className=\"p-2 hover:bg-gray-100 rounded\">&gt;</button>\r\n                </div>\r\n                <div className=\"grid grid-cols-7 gap-1 text-center text-sm mb-2\">{[\"S\",\"M\",\"T\",\"W\",\"T\",\"F\",\"S\"].map((d, i) => <div key={`day-${i}`} className=\"py-2 text-gray-500\">{d}</div>)}</div>\r\n                <div className=\"grid grid-cols-7 gap-1\">\r\n                  {generateCalendarDays().map((date, i) => (\r\n                    <div key={i}>\r\n                      {date ? (\r\n                        <button \r\n                          onClick={() => isDateSelectable(date) && setSelectedDate(date)} \r\n                          disabled={!isDateSelectable(date)} \r\n                          className={`w-full aspect-square rounded-lg text-sm ${\r\n                            selectedDate && isSameDay(date, selectedDate) \r\n                              ? \"bg-pink-600 text-white\" \r\n                              : !isDateSelectable(date)\r\n                                ? \"text-gray-300 cursor-not-allowed\" \r\n                                : \"hover:bg-pink-50\"\r\n                          }`}\r\n                          title={!isDateSelectable(date) && !isBefore(date, startOfDay(new Date())) ? `Bookings only available up to ${maxAdvanceDays} days in advance` : undefined}\r\n                        >\r\n                          {date.getDate()}\r\n                        </button>\r\n                      ) : <div />}\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n              <div className=\"bg-white rounded-2xl shadow-lg p-6\">\r\n                <h3 className=\"font-bold mb-4 flex items-center gap-2\"><Clock className=\"w-5 h-5 text-pink-600\" />Available Times</h3>\r\n          {!selectedDate ? (\r\n                  <p className=\"text-gray-500 text-center py-12\">Select a date first</p>\r\n                ) : !isDateSelectable(selectedDate) ? (\r\n                  <div className=\"text-center py-12\">\r\n                    <p className=\"text-gray-500 mb-2\">This date is not available for booking</p>\r\n                    {maxAdvanceDays > 0 && (\r\n                      <p className=\"text-sm text-gray-400\">Bookings only available up to {maxAdvanceDays} days in advance</p>\r\n                    )}\r\n                  </div>\r\n                ) : availableSlots.length === 0 ? (\r\n                  <div className=\"text-center py-12\">\r\n                    <p className=\"text-gray-500 mb-2\">No available time slots for this date</p>\r\n                    <p className=\"text-sm text-gray-400\">Please select another date</p>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"grid grid-cols-3 gap-2\">\r\n                    {availableSlots.map(time => (\r\n                      <button \r\n                        key={time} \r\n                        onClick={() => setSelectedTime(time)} \r\n                        disabled={!isSlotAvailable(format(selectedDate, \"yyyy-MM-dd\"), time)}\r\n                        className={`py-2 px-1 rounded-lg text-sm ${\r\n                          selectedTime === time \r\n                            ? \"bg-pink-600 text-white\" \r\n                            : !isSlotAvailable(format(selectedDate, \"yyyy-MM-dd\"), time)\r\n                            ? \"bg-gray-100 text-gray-400 cursor-not-allowed\"\r\n                            : \"bg-pink-50 text-pink-700 hover:bg-pink-100\"\r\n                        }`}\r\n                      >\r\n                        {time}\r\n                        {!isSlotAvailable(format(selectedDate, \"yyyy-MM-dd\"), time) && (\r\n                          <span className=\"block text-[10px]\">Booked</span>\r\n                        )}\r\n                      </button>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n                {selectedTime && <button onClick={() => setStep(3)} className=\"w-full mt-4 py-3 bg-pink-600 text-white rounded-full font-medium hover:bg-pink-700\">Continue</button>}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {step === 3 && (\r\n          <div className=\"max-w-2xl mx-auto\">\r\n            <h1 className=\"text-3xl font-bold text-center mb-8\">Your Details</h1>\r\n            <form onSubmit={handleDetailsSubmit} className=\"space-y-6\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium mb-2\">Full Name *</label>\r\n                <div className=\"relative\"><User className=\"absolute left-3 top-3 w-5 h-5 text-gray-400\" />\r\n                  <input required type=\"text\" value={formData.name} onChange={e => setFormData({...formData, name: e.target.value})} className=\"w-full pl-10 pr-4 py-3 border rounded-xl focus:border-pink-500 focus:outline-none\" placeholder=\"Your name\" />\r\n                </div>\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium mb-2\">Phone *</label>\r\n                <div className=\"relative\"><Phone className=\"absolute left-3 top-3 w-5 h-5 text-gray-400\" />\r\n                  <input required type=\"tel\" value={formData.phone} onChange={e => setFormData({...formData, phone: e.target.value})} className=\"w-full pl-10 pr-4 py-3 border rounded-xl focus:border-pink-500 focus:outline-none\" placeholder=\"09XX XXX XXXX\" />\r\n                </div>\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium mb-2\">Email *</label>\r\n                <div className=\"relative\"><Mail className=\"absolute left-3 top-3 w-5 h-5 text-gray-400\" />\r\n                  <input required type=\"email\" value={formData.email} onChange={e => setFormData({...formData, email: e.target.value})} className=\"w-full pl-10 pr-4 py-3 border rounded-xl focus:border-pink-500 focus:outline-none\" placeholder=\"your@email.com\" />\r\n                </div>\r\n              </div>\r\n              <div className=\"flex gap-4 pt-4\">\r\n                <button type=\"button\" onClick={() => setStep(2)} className=\"flex-1 py-3 border-2 border-gray-300 rounded-full font-medium hover:bg-gray-50\">Back</button>\r\n                <button type=\"submit\" className=\"flex-1 py-3 bg-pink-600 text-white rounded-full font-medium hover:bg-pink-700 flex items-center justify-center gap-2\">\r\n                  <CreditCard className=\"w-5 h-5\" />Continue to Payment\r\n                </button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        )}\r\n\r\n        {step === 4 && selectedService && (\r\n          <div className=\"max-w-2xl mx-auto\">\r\n            <h1 className=\"text-3xl font-bold text-center mb-8\">Payment</h1>\r\n            <div className=\"bg-white rounded-2xl shadow-lg p-8\">\r\n              <div className=\"text-center mb-6\">\r\n                <h2 className=\"text-xl font-semibold mb-2\">Booking Fee</h2>\r\n                <p className=\"text-4xl font-bold text-pink-600\">â‚±{bookingFee}</p>\r\n                <p className=\"text-gray-500 text-sm mt-1\">Required to confirm your appointment</p>\r\n              </div>\r\n              \r\n              <div className=\"border-t border-b border-gray-200 py-6 my-6\">\r\n                <h3 className=\"font-semibold mb-4 flex items-center gap-2\">\r\n                  <QrCode className=\"w-5 h-5 text-pink-600\" />\r\n                  Scan to Pay with GCash\r\n                </h3>\r\n                <div className=\"relative w-64 h-64 mx-auto bg-gray-100 rounded-xl overflow-hidden\">\r\n                  <img\r\n                    src=\"/images/payment-qr.png\"\r\n                    alt=\"GCash Payment QR Code\"\r\n                    className=\"object-contain w-full h-full\"\r\n                  />\r\n                </div>\r\n                <p className=\"text-center text-sm text-gray-500 mt-4\">\r\n                  Open your GCash app and scan the QR code to pay\r\n                </p>\r\n              </div>\r\n\r\n              <div className=\"bg-pink-50 rounded-xl p-4 mb-6\">\r\n                <h4 className=\"font-semibold text-pink-800 mb-2\">Booking Summary</h4>\r\n                <div className=\"space-y-1 text-sm\">\r\n                  <p><span className=\"text-gray-600\">Service:</span> {selectedService.name}</p>\r\n                  <p><span className=\"text-gray-600\">Date:</span> {selectedDate ? format(selectedDate, \"MMMM d, yyyy\") : \"\"}</p>\r\n                  <p><span className=\"text-gray-600\">Time:</span> {selectedTime}</p>\r\n                  <p><span className=\"text-gray-600\">Name:</span> {formData.name}</p>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"flex gap-4\">\r\n                <button onClick={() => setStep(3)} className=\"flex-1 py-3 border-2 border-gray-300 rounded-full font-medium hover:bg-gray-50\">Back</button>\r\n                <button onClick={handlePaymentComplete} disabled={isLoading} className=\"flex-1 py-3 bg-pink-600 text-white rounded-full font-medium hover:bg-pink-700 flex items-center justify-center gap-2\">\r\n                  {isLoading ? <Loader2 className=\"w-5 h-5 animate-spin\" /> : <CheckCircle className=\"w-5 h-5\" />}\r\n                  {isLoading ? \"Processing...\" : \"I've Paid\"}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default function BookPage() {\r\n  return (\r\n    <Suspense fallback={<div className=\"min-h-screen flex items-center justify-center\"><Loader2 className=\"w-8 h-8 animate-spin text-pink-600\" /></div>}>\r\n      <BookingForm />\r\n    </Suspense>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AACA;;;AARA;;;;;;;;AAUA,SAAS;;IACP,MAAM,eAAe,IAAA,wJAAe;IACpC,MAAM,qBAAqB,aAAa,GAAG,CAAC;IAC5C,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAC;IACjC,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAAc;IAC9D,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAAgB;IAChE,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,IAAA,yKAAQ,EAAC,sBAAsB;IACjF,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAC3C,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAAC,IAAI;IACrD,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAC;QAAE,MAAM;QAAI,OAAO;QAAI,OAAO;QAAI,OAAO;IAAG;IACrF,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,yKAAQ,EAAW,EAAE;IAEjE,MAAM,kBAAkB,IAAA,oIAAc,EAAC;IACvC,MAAM,eAAe,IAAA,6IAAuB;IAC5C,MAAM,iBAAiB,aAAa,qBAAqB;IAEzD,2CAA2C;IAC3C,IAAA,0KAAS;iCAAC;YACR,IAAI,cAAc;gBAChB,MAAM,UAAU,IAAA,kKAAM,EAAC,cAAc;gBACrC,kBAAkB,IAAA,2IAAqB,EAAC;gBACxC,kDAAkD;gBAClD,IAAI,gBAAgB,CAAC,IAAA,2IAAqB,EAAC,SAAS,QAAQ,CAAC,eAAe;oBAC1E,gBAAgB;gBAClB;YACF;QACF;gCAAG;QAAC;KAAa;IAEjB,uDAAuD;IACvD,MAAM,mBAAmB,CAAC;QACxB,+BAA+B;QAC/B,IAAI,IAAA,sJAAQ,EAAC,MAAM,IAAA,0JAAU,EAAC,IAAI,UAAU,OAAO;QAEnD,kCAAkC;QAClC,IAAI,iBAAiB,GAAG;YACtB,MAAM,QAAQ,IAAI;YAClB,MAAM,QAAQ,CAAC,GAAG,GAAG,GAAG;YACxB,MAAM,WAAW,KAAK,IAAI,CAAC,CAAC,KAAK,OAAO,KAAK,MAAM,OAAO,EAAE,IAAI,CAAC,OAAO,KAAK,KAAK,EAAE;YACpF,IAAI,WAAW,gBAAgB,OAAO;QACxC;QAEA,OAAO;IACT;IAEA,MAAM,uBAAuB;QAC3B,MAAM,OAAO,aAAa,WAAW,IAAI,QAAQ,aAAa,QAAQ;QACtE,MAAM,WAAW,IAAI,KAAK,MAAM,OAAO,IAAI,UAAU,IAAI,KAAK,MAAM,QAAQ,GAAG;QAC/E,MAAM,OAAwB,EAAE;QAChC,IAAK,IAAI,IAAI,GAAG,IAAI,SAAS,MAAM,IAAI,IAAK,KAAK,IAAI,CAAC;QACtD,IAAK,IAAI,IAAI,GAAG,KAAK,QAAQ,OAAO,IAAI,IAAK,KAAK,IAAI,CAAC,IAAI,KAAK,MAAM,OAAO;QAC7E,OAAO;IACT;IAEA,MAAM,sBAAsB,CAAC;QAC3B,EAAE,cAAc;QAChB,QAAQ;IACV;IAEA,MAAM,wBAAwB;QAC5B,aAAa;QACb,IAAI,CAAC,gBAAgB,CAAC,gBAAgB,CAAC,iBAAiB;YAAE,aAAa;YAAQ;QAAQ;QACvF,IAAA,mIAAa,EAAC;YACZ,MAAM,IAAA,kKAAM,EAAC,cAAc;YAC3B,UAAU;YACV,WAAW;YACX,cAAc,SAAS,IAAI;YAC3B,eAAe,SAAS,KAAK;YAC7B,eAAe,SAAS,KAAK;YAC7B,OAAO,SAAS,KAAK;YACrB,eAAe;QACjB;QACA,QAAQ;QACR,aAAa;IACf;IAEA,MAAM,aAAa,kBAAkB,IAAA,mIAAa,EAAC,gBAAgB,QAAQ,IAAI;IAE/E,IAAI,SAAS,GAAG;QACd,qBACE,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAI,WAAU;sCACb,cAAA,6LAAC,6OAAW;gCAAC,WAAU;;;;;;;;;;;sCAEzB,6LAAC;4BAAG,WAAU;sCAAqC;;;;;;sCACnD,6LAAC;4BAAE,WAAU;sCAAqB;;;;;;sCAClC,6LAAC,0KAAI;4BAAC,MAAK;4BAAI,WAAU;sCAA8E;;;;;;;;;;;;;;;;;;;;;;IAKjH;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAO,WAAU;0BAChB,cAAA,6LAAC;oBAAI,WAAU;;sCACb,6LAAC,0KAAI;4BAAC,MAAK;4BAAI,WAAU;;8CAA4D,6LAAC,sOAAW;oCAAC,WAAU;;;;;;8CAAY,6LAAC;8CAAK;;;;;;;;;;;;sCAC9H,6LAAC;4BAAK,WAAU;sCAA8C;;;;;;sCAC9D,6LAAC;4BAAI,WAAU;;;;;;;;;;;;;;;;;0BAGnB,6LAAC;gBAAI,WAAU;;oBACZ,SAAS,mBACR,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAG,WAAU;0CAAsC;;;;;;0CACpD,6LAAC;gCAAI,WAAU;0CACZ,8HAAQ,CAAC,GAAG,CAAC,CAAC,wBACb,6LAAC;wCAAwB,SAAS;4CAAQ,qBAAqB,QAAQ,EAAE;4CAAG,QAAQ;wCAAI;wCACtF,WAAW,CAAC,kDAAkD,EAAE,sBAAsB,QAAQ,EAAE,GAAG,+BAA+B,yCAAyC;;0DAC3K,6LAAC;gDAAI,WAAU;;kEACb,6LAAC;wDAAK,WAAU;kEAAY,QAAQ,IAAI;;;;;;kEACxC,6LAAC;wDAAK,WAAU;kEAA2B,IAAA,iIAAW,EAAC,QAAQ,KAAK;;;;;;;;;;;;0DAEtE,6LAAC;gDAAG,WAAU;0DAAqB,QAAQ,IAAI;;;;;;4CAC9C,QAAQ,WAAW,kBAAI,6LAAC;gDAAE,WAAU;0DAA8B,QAAQ,WAAW;;;;;;;uCAP3E,QAAQ,EAAE;;;;;;;;;;;;;;;;oBAc9B,SAAS,mBACR,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAG,WAAU;0CAAsC;;;;;;0CACpD,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAI,WAAU;;0DACb,6LAAC;gDAAI,WAAU;;kEACb,6LAAC;wDAAO,SAAS,IAAM,gBAAgB,IAAI,KAAK,aAAa,WAAW,IAAI,aAAa,QAAQ,KAAK;wDAAK,WAAU;kEAAgC;;;;;;kEACrJ,6LAAC;wDAAG,WAAU;kEAAa,IAAA,kKAAM,EAAC,cAAc;;;;;;kEAChD,6LAAC;wDAAO,SAAS,IAAM,gBAAgB,IAAI,KAAK,aAAa,WAAW,IAAI,aAAa,QAAQ,KAAK;wDAAK,WAAU;kEAAgC;;;;;;;;;;;;0DAEvJ,6LAAC;gDAAI,WAAU;0DAAmD;oDAAC;oDAAI;oDAAI;oDAAI;oDAAI;oDAAI;oDAAI;iDAAI,CAAC,GAAG,CAAC,CAAC,GAAG,kBAAM,6LAAC;wDAAqB,WAAU;kEAAsB;uDAA5C,CAAC,IAAI,EAAE,GAAG;;;;;;;;;;0DAClI,6LAAC;gDAAI,WAAU;0DACZ,uBAAuB,GAAG,CAAC,CAAC,MAAM,kBACjC,6LAAC;kEACE,qBACC,6LAAC;4DACC,SAAS,IAAM,iBAAiB,SAAS,gBAAgB;4DACzD,UAAU,CAAC,iBAAiB;4DAC5B,WAAW,CAAC,wCAAwC,EAClD,gBAAgB,IAAA,wJAAS,EAAC,MAAM,gBAC5B,2BACA,CAAC,iBAAiB,QAChB,qCACA,oBACN;4DACF,OAAO,CAAC,iBAAiB,SAAS,CAAC,IAAA,sJAAQ,EAAC,MAAM,IAAA,0JAAU,EAAC,IAAI,WAAW,CAAC,8BAA8B,EAAE,eAAe,gBAAgB,CAAC,GAAG;sEAE/I,KAAK,OAAO;;;;;iFAEb,6LAAC;;;;;uDAhBG;;;;;;;;;;;;;;;;kDAqBhB,6LAAC;wCAAI,WAAU;;0DACb,6LAAC;gDAAG,WAAU;;kEAAyC,6LAAC,gNAAK;wDAAC,WAAU;;;;;;oDAA0B;;;;;;;4CACvG,CAAC,6BACM,6LAAC;gDAAE,WAAU;0DAAkC;;;;;uDAC7C,CAAC,iBAAiB,8BACpB,6LAAC;gDAAI,WAAU;;kEACb,6LAAC;wDAAE,WAAU;kEAAqB;;;;;;oDACjC,iBAAiB,mBAChB,6LAAC;wDAAE,WAAU;;4DAAwB;4DAA+B;4DAAe;;;;;;;;;;;;uDAGrF,eAAe,MAAM,KAAK,kBAC5B,6LAAC;gDAAI,WAAU;;kEACb,6LAAC;wDAAE,WAAU;kEAAqB;;;;;;kEAClC,6LAAC;wDAAE,WAAU;kEAAwB;;;;;;;;;;;qEAGvC,6LAAC;gDAAI,WAAU;0DACZ,eAAe,GAAG,CAAC,CAAA,qBAClB,6LAAC;wDAEC,SAAS,IAAM,gBAAgB;wDAC/B,UAAU,CAAC,IAAA,qIAAe,EAAC,IAAA,kKAAM,EAAC,cAAc,eAAe;wDAC/D,WAAW,CAAC,6BAA6B,EACvC,iBAAiB,OACb,2BACA,CAAC,IAAA,qIAAe,EAAC,IAAA,kKAAM,EAAC,cAAc,eAAe,QACrD,iDACA,8CACJ;;4DAED;4DACA,CAAC,IAAA,qIAAe,EAAC,IAAA,kKAAM,EAAC,cAAc,eAAe,uBACpD,6LAAC;gEAAK,WAAU;0EAAoB;;;;;;;uDAbjC;;;;;;;;;;4CAmBZ,8BAAgB,6LAAC;gDAAO,SAAS,IAAM,QAAQ;gDAAI,WAAU;0DAAqF;;;;;;;;;;;;;;;;;;;;;;;;oBAM1J,SAAS,mBACR,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAG,WAAU;0CAAsC;;;;;;0CACpD,6LAAC;gCAAK,UAAU;gCAAqB,WAAU;;kDAC7C,6LAAC;;0DACC,6LAAC;gDAAM,WAAU;0DAAiC;;;;;;0DAClD,6LAAC;gDAAI,WAAU;;kEAAW,6LAAC,6MAAI;wDAAC,WAAU;;;;;;kEACxC,6LAAC;wDAAM,QAAQ;wDAAC,MAAK;wDAAO,OAAO,SAAS,IAAI;wDAAE,UAAU,CAAA,IAAK,YAAY;gEAAC,GAAG,QAAQ;gEAAE,MAAM,EAAE,MAAM,CAAC,KAAK;4DAAA;wDAAI,WAAU;wDAAoF,aAAY;;;;;;;;;;;;;;;;;;kDAGjO,6LAAC;;0DACC,6LAAC;gDAAM,WAAU;0DAAiC;;;;;;0DAClD,6LAAC;gDAAI,WAAU;;kEAAW,6LAAC,gNAAK;wDAAC,WAAU;;;;;;kEACzC,6LAAC;wDAAM,QAAQ;wDAAC,MAAK;wDAAM,OAAO,SAAS,KAAK;wDAAE,UAAU,CAAA,IAAK,YAAY;gEAAC,GAAG,QAAQ;gEAAE,OAAO,EAAE,MAAM,CAAC,KAAK;4DAAA;wDAAI,WAAU;wDAAoF,aAAY;;;;;;;;;;;;;;;;;;kDAGlO,6LAAC;;0DACC,6LAAC;gDAAM,WAAU;0DAAiC;;;;;;0DAClD,6LAAC;gDAAI,WAAU;;kEAAW,6LAAC,6MAAI;wDAAC,WAAU;;;;;;kEACxC,6LAAC;wDAAM,QAAQ;wDAAC,MAAK;wDAAQ,OAAO,SAAS,KAAK;wDAAE,UAAU,CAAA,IAAK,YAAY;gEAAC,GAAG,QAAQ;gEAAE,OAAO,EAAE,MAAM,CAAC,KAAK;4DAAA;wDAAI,WAAU;wDAAoF,aAAY;;;;;;;;;;;;;;;;;;kDAGpO,6LAAC;wCAAI,WAAU;;0DACb,6LAAC;gDAAO,MAAK;gDAAS,SAAS,IAAM,QAAQ;gDAAI,WAAU;0DAAiF;;;;;;0DAC5I,6LAAC;gDAAO,MAAK;gDAAS,WAAU;;kEAC9B,6LAAC,mOAAU;wDAAC,WAAU;;;;;;oDAAY;;;;;;;;;;;;;;;;;;;;;;;;;oBAO3C,SAAS,KAAK,iCACb,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAG,WAAU;0CAAsC;;;;;;0CACpD,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAI,WAAU;;0DACb,6LAAC;gDAAG,WAAU;0DAA6B;;;;;;0DAC3C,6LAAC;gDAAE,WAAU;;oDAAmC;oDAAE;;;;;;;0DAClD,6LAAC;gDAAE,WAAU;0DAA6B;;;;;;;;;;;;kDAG5C,6LAAC;wCAAI,WAAU;;0DACb,6LAAC;gDAAG,WAAU;;kEACZ,6LAAC,uNAAM;wDAAC,WAAU;;;;;;oDAA0B;;;;;;;0DAG9C,6LAAC;gDAAI,WAAU;0DACb,cAAA,6LAAC;oDACC,KAAI;oDACJ,KAAI;oDACJ,WAAU;;;;;;;;;;;0DAGd,6LAAC;gDAAE,WAAU;0DAAyC;;;;;;;;;;;;kDAKxD,6LAAC;wCAAI,WAAU;;0DACb,6LAAC;gDAAG,WAAU;0DAAmC;;;;;;0DACjD,6LAAC;gDAAI,WAAU;;kEACb,6LAAC;;0EAAE,6LAAC;gEAAK,WAAU;0EAAgB;;;;;;4DAAe;4DAAE,gBAAgB,IAAI;;;;;;;kEACxE,6LAAC;;0EAAE,6LAAC;gEAAK,WAAU;0EAAgB;;;;;;4DAAY;4DAAE,eAAe,IAAA,kKAAM,EAAC,cAAc,kBAAkB;;;;;;;kEACvG,6LAAC;;0EAAE,6LAAC;gEAAK,WAAU;0EAAgB;;;;;;4DAAY;4DAAE;;;;;;;kEACjD,6LAAC;;0EAAE,6LAAC;gEAAK,WAAU;0EAAgB;;;;;;4DAAY;4DAAE,SAAS,IAAI;;;;;;;;;;;;;;;;;;;kDAIlE,6LAAC;wCAAI,WAAU;;0DACb,6LAAC;gDAAO,SAAS,IAAM,QAAQ;gDAAI,WAAU;0DAAiF;;;;;;0DAC9H,6LAAC;gDAAO,SAAS;gDAAuB,UAAU;gDAAW,WAAU;;oDACpE,0BAAY,6LAAC,+NAAO;wDAAC,WAAU;;;;;6EAA4B,6LAAC,6OAAW;wDAAC,WAAU;;;;;;oDAClF,YAAY,kBAAkB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASjD;GA5RS;;QACc,wJAAe;;;KAD7B;AA8RM,SAAS;IACtB,qBACE,6LAAC,yKAAQ;QAAC,wBAAU,6LAAC;YAAI,WAAU;sBAAgD,cAAA,6LAAC,+NAAO;gBAAC,WAAU;;;;;;;;;;;kBACpG,cAAA,6LAAC;;;;;;;;;;AAGP;MANwB"}}]
}